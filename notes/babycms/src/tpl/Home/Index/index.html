<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><title>thinkphp-bjyadmin(魔改版)</title><bootstrapcss/><webuploadercss/><style type="text/css">
        .box{
            margin-top: 50px;
            padding: 5px;
            width: 600px;
            border: 1px solid red;
        }
        h4{
            padding: 5px 0;
        }
    </style></head><body><h2>thinkphp-bjyadmin(魔改版)</h2>
    <div class="box">
    <h4>Test功能</h4>
    </br>
    <form action="{:U('Home/Index/test')}" method="get"><input type="submit" value="Test!"></form></div>
    
    <div class="box"><h4>请自行阅读源码探索更多功能~ And /flag is waiting for you!</h4></div>
    <script>
    var handler = function (captchaObj) {
        // 将验证码加到id为captcha的元素里
        captchaObj.appendTo("#captcha");
     };
    // 获取验证码
    $.get("{:U('Home/Index/geetest_show_verify')}", function(data) {
        // 使用initGeetest接口
        // 参数1：配置参数，与创建Geetest实例时接受的参数一致
        // 参数2：回调，回调的第一个参数验证码对象，之后可以使用它做appendTo之类的事件
        initGeetest({
            gt: data.gt,
            challenge: data.challenge,
            product: "float", // 产品形式
            offline: !data.success
        }, handler);
    },'json');
    // 检测验证码
    function check_verify(){
        // 组合验证需要用的数据
        var test=$('.geetest_challenge').val();
        var postData={
            geetest_challenge: $('.geetest_challenge').val(),
            geetest_validate: $('.geetest_validate').val(),
            geetest_seccode: $('.geetest_seccode').val()
        }
        // 验证是否通过
        $.post("{:U('Home/Index/geetest_ajax_check')}", postData, function(data) {
            if (data==1) {
                alert('验证成功');
            }else{
                alert('验证失败');
            }
        });
    }
</script></body></html>